# ğŸ’• Pary Talk - Claude Code Guide

## ğŸ“Œ Projekt Overview

**Dating app dla par** - KMP (Kotlin Multiplatform) z Compose Multiplatform.

**Specs:**
- Android (Ty) â†” iOS (Dziewczyna)
- Komunikacja: NFC (brak backendu!)
- Baza: SQLite offline
- UI: Compose Multiplatform (jeden kod!)
- Pytania: ~25 seed data

---

## ğŸ¯ Co Aplikacja Robi

1. **Setup (pierwszy raz):**
    - Ty: Wpisujesz imiÄ™ "Maciek"
    - ZbliÅ¼asz Android do iPhone'a (NFC)
    - Dziewczyna wpisuje imiÄ™ "Zofia"
    - Oba telefony zapisujÄ… konfiguracjÄ™

2. **Granie:**
    - Klikasz "GRAJ"
    - WyÅ›wietli siÄ™ losowe pytanie
    - Przeczytacie pytanie gÅ‚oÅ›nie
    - Odpowiadacie
    - Klikasz "NASTÄ˜PNE PYTANIE"
    - Repeat...

3. **Historia:**
    - KaÅ¼de pytanie zapisuje siÄ™ lokalnie
    - MoÅ¼esz filtrowaÄ‡ po kategoriach
    - "Pierwsze zbliÅ¼enie" zaznaczone specjalnie ğŸ’•

---

## ğŸ“ Struktura Projektu

```
dating-app-kmp/
â”œâ”€â”€ build.gradle.kts                    âœ…
â”œâ”€â”€ settings.gradle.kts                 âœ…
â”œâ”€â”€ gradle.properties                   âœ…
â”‚
â”œâ”€â”€ shared/                             # KMP Module
â”‚   â”œâ”€â”€ build.gradle.kts                âœ…
â”‚   â”œâ”€â”€ src/commonMain/
â”‚   â”‚   â”œâ”€â”€ kotlin/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/ (4 files)       âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseDriverFactory.kt âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ QuestionRepository.kt    â³ NEEDS WORK
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SeedData.kt             â³ TODO
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/ (3 ViewModels)  â³ TODO
â”‚   â”‚   â”‚   â””â”€â”€ utils/                  â³ TODO
â”‚   â”‚   â””â”€â”€ sqldelight/database.sq      âœ…
â”‚   â”œâ”€â”€ src/androidMain/                âœ…
â”‚   â””â”€â”€ src/iosMain/                    âœ…
â”‚
â”œâ”€â”€ composeApp/                         # UI Module
â”‚   â”œâ”€â”€ build.gradle.kts                âœ…
â”‚   â””â”€â”€ src/ (6 screens, components)    â³ TODO
â”‚
â”œâ”€â”€ design-prototype.html               # Reference âœ…
â”œâ”€â”€ Claude.md                           # Instructions
â”œâ”€â”€ CLAUDE_CODE_GUIDE.md               # This file
â””â”€â”€ .claude-code                        # Config
```

---

## ğŸ—„ï¸ Database

### 4 Tabele

**CATEGORY** - 5 kategorii pytaÅ„
```
ğŸŒŸ Marzenia & Aspiracje
ğŸ’• MiÅ‚oÅ›Ä‡ & Relacje
ğŸ˜„ Åšmieszne & Dziwne
ğŸ§  GÅ‚Ä™bokie myÅ›li
âœˆï¸ Przygoda & PodrÃ³Å¼e
```

**QUESTION** - ~25 pytaÅ„ (seed)
```
"Co byÅ› zrobiÅ‚/a z gwarancjÄ… sukcesu?"
"Kiedy ostatnio czuÅ‚eÅ›/a motyle w brzuchu?"
...
```

**PLAYER_CONFIG** - Konfiguracja (jedna linia per device)
```
Maciek (Android) â†” Zofia (iOS)
Setup: NFC / MANUAL / SOLO
```

**QUESTION_HISTORY** - RosnÄ…ca historia
```
Pytanie | Kategoria | Czas | Czy Ty? | Pierwsze zbliÅ¼enie?
```

---

## ğŸ”Œ NFC Flow

### Android â†’ iOS
```
Android (Ty):
1. Losuje pytanie
2. Serializes to JSON
3. Writes to NFC tag

iOS (Dziewczyna):
1. Scans NFC tag
2. Reads JSON
3. Deserializes
4. Saves locally
5. Shows: "âœ¨ ZBLIÅ»ENIE! âœ¨"
```

### Setup (First Time)
```
Android: "ZbliÅ¼ iPhone"
iOS: "ZbliÅ¼ do Android'a"
â†“ (NFC scan)
Both: Save player_config
Both: Navigate to Home
```

---

## ğŸ® Game Flow - V1 (Simple)

```
Home â†’ GRAJ â†’ Game Screen
             â†“
        Show Question
             â†“
        NASTÄ˜PNE â†’ New Question
             â†“
        Repeat...

        Or: HISTORIA â†’ History Screen
                      â†“
                   Filter/Browse
                      â†“
                   Back â†’ Home
```

---

## ğŸ’¾ Models

**Question**
```kotlin
id, categoryId, text, createdAt
```

**Category**
```kotlin
id, name, emoji
```

**PlayerSetup**
```kotlin
playerId, playerName, partnerId, partnerName, deviceType, setupMethod, setupDate
```

**HistoryEntry**
```kotlin
id, questionId, questionText, categoryId, categoryName, categoryEmoji, askedAt, yourTurn, isFirstTouch
```

---

## ğŸ”§ Repository Methods

Must implement:
```kotlin
getAllCategories(): List<Category>
getRandomQuestion(): Question?
getPlayerConfig(): PlayerSetup?
savePlayerConfig(setup: PlayerSetup)
getQuestionHistory(limit: Int): List<HistoryEntry>
insertQuestionHistory(entry: HistoryEntry)
getHistoryByCategory(categoryId: Long): List<HistoryEntry>
deleteHistory()
getFirstTouchEntry(): HistoryEntry?
```

---

## ğŸ¨ UI Screens (6 Total)

1. **WelcomeScreen** - ImiÄ™ + opcje (NFC/Manual/Solo)
2. **SetupNFCScreen** - "ZbliÅ¼ telefon"
3. **ManualSetupScreen** - Wpisz dane partnera
4. **HomeScreen** - "CzeÅ›Ä‡ Maciek! Partner: Zofia"
5. **GameScreen** - Pytanie + NASTÄ˜PNE button
6. **HistoryScreen** - Lista + filtrowanie

---

## ğŸš€ Build

```bash
# Android
./gradlew :composeApp:installDebug

# iOS
./gradlew :composeApp:runDebugIosForeground
```

---

## ğŸ¯ Next Steps (Priority)

**Phase 1:**
- [ ] Complete QuestionRepository
- [ ] Create SeedData.kt
- [ ] Create NFCManager (Android + iOS)

**Phase 2:**
- [ ] Create ViewModels (3x)

**Phase 3:**
- [ ] Create Screens (6x)
- [ ] Create Components
- [ ] Create Theme

---

**Check Claude.md for detailed work instructions!**